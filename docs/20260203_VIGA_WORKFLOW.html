<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIGA SAM3D å·¥ä½œæµç¨‹ - 2026-02-03</title>
    <style>
        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --text-primary: #c9d1d9;
            --text-secondary: #8b949e;
            --accent-green: #3fb950;
            --accent-blue: #58a6ff;
            --accent-purple: #bc8cff;
            --accent-yellow: #d29922;
            --accent-red: #f85149;
            --border-color: #30363d;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 2rem;
        }
        
        .container { max-width: 1200px; margin: 0 auto; }
        
        header {
            text-align: center;
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle { color: var(--text-secondary); font-size: 1.1rem; }
        
        section {
            background-color: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border-color);
        }
        
        h2 {
            color: var(--accent-blue);
            font-size: 1.3rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        h2::before { content: "â–¸"; color: var(--accent-purple); }
        
        .code-block {
            background-color: var(--bg-tertiary);
            border-radius: 8px;
            padding: 1rem;
            overflow-x: auto;
            font-family: 'SF Mono', Consolas, monospace;
            font-size: 0.85rem;
            line-height: 1.5;
            margin: 0.5rem 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 0.5rem;
        }
        
        th, td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        th { color: var(--text-secondary); font-weight: 500; font-size: 0.9rem; }
        td { font-family: 'SF Mono', Consolas, monospace; font-size: 0.9rem; }
        
        .highlight { color: var(--accent-green); }
        .warning { color: var(--accent-yellow); }
        .error { color: var(--accent-red); }
        
        .image-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .image-card {
            background-color: var(--bg-tertiary);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
        }
        
        .image-card h3 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }
        
        .image-card img {
            max-width: 100%;
            border-radius: 8px;
        }
        
        .pipeline-flow {
            display: flex;
            align-items: center;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 1rem;
            padding: 1.5rem;
            background-color: var(--bg-tertiary);
            border-radius: 8px;
            margin-top: 1rem;
        }
        
        .pipeline-step {
            text-align: center;
            padding: 1rem;
            min-width: 150px;
        }
        
        .pipeline-step .icon { font-size: 2rem; margin-bottom: 0.5rem; }
        .pipeline-step .label { font-size: 0.9rem; color: var(--text-secondary); }
        .pipeline-arrow { font-size: 1.5rem; color: var(--accent-purple); }
        
        .alert-box {
            background-color: rgba(248, 81, 73, 0.1);
            border: 1px solid var(--accent-red);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }
        
        .alert-box h4 {
            color: var(--accent-red);
            margin-bottom: 0.5rem;
        }
        
        footer {
            text-align: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .signature {
            margin-top: 1rem;
            font-style: italic;
            color: var(--accent-purple);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ”§ VIGA SAM3D å·¥ä½œæµç¨‹</h1>
            <p class="subtitle">ä»å›¾åƒåˆ° 3D Mesh çš„å®Œæ•´è°ƒç”¨è®°å½•</p>
        </header>
        
        <section>
            <h2>Pipeline æ¦‚è§ˆ</h2>
            <div class="pipeline-flow">
                <div class="pipeline-step">
                    <div class="icon">ğŸ–¼ï¸</div>
                    <div class="label">è¾“å…¥å›¾åƒ<br>+ Mask (.npy)</div>
                </div>
                <div class="pipeline-arrow">â†’</div>
                <div class="pipeline-step">
                    <div class="icon">ğŸ§ </div>
                    <div class="label">SAM3D<br>æ¨ç†</div>
                </div>
                <div class="pipeline-arrow">â†’</div>
                <div class="pipeline-step">
                    <div class="icon">ğŸ”„</div>
                    <div class="label">åæ ‡å˜æ¢<br>(VIGA)</div>
                </div>
                <div class="pipeline-arrow">â†’</div>
                <div class="pipeline-step">
                    <div class="icon">ğŸ“¦</div>
                    <div class="label">GLB è¾“å‡º<br>+ å˜æ¢ä¿¡æ¯</div>
                </div>
            </div>
        </section>
        
        <section>
            <h2>ç¯å¢ƒé…ç½®</h2>
            <table>
                <tr><th>é…ç½®é¡¹</th><th>å€¼</th></tr>
                <tr><td>æ“ä½œç³»ç»Ÿ</td><td>Windows 11</td></tr>
                <tr><td>Conda ç¯å¢ƒ</td><td class="highlight">sam3d_py311</td></tr>
                <tr><td>Python</td><td>3.11.14</td></tr>
                <tr><td>PyTorch</td><td>2.8.0+cu128</td></tr>
                <tr><td>CUDA</td><td>12.8</td></tr>
                <tr><td>GPU</td><td>NVIDIA GeForce RTX 5080 (16GB)</td></tr>
            </table>
        </section>
        
        <section>
            <h2>è°ƒç”¨å‘½ä»¤</h2>
            <div class="code-block">
<span style="color: var(--accent-purple);"># è®¾ç½® PYTHONPATH</span>
$env:PYTHONPATH = "."

<span style="color: var(--accent-purple);"># è¿è¡Œ VIGA SAM3D Worker</span>
conda run -n sam3d_py311 python "tools\sam3d\sam3d_worker.py" `
    --image "output\test_sam\green_tea_bottle.png" `
    --mask  "output\test_sam\green_tea_bottle.npy" `
    --config "utils\third_party\sam3d\checkpoints\hf\checkpoints\pipeline.yaml" `
    --glb   "output\viga_test\green_tea_bottle_viga.glb"
            </div>
        </section>
        
        <section>
            <h2>è¾“å…¥ä¸è¾“å‡º</h2>
            <div class="image-grid">
                <div class="image-card">
                    <h3>ğŸ“¥ è¾“å…¥å›¾åƒ (å¸¦ Mask)</h3>
                    <img src="test_results_images/01_greentea_input.jpg" alt="Input Image">
                    <p style="margin-top: 0.5rem; font-size: 0.85rem; color: var(--text-secondary);">
                        green_tea_bottle.png + green_tea_bottle.npy (1024Ã—771)
                    </p>
                </div>
                <div class="image-card">
                    <h3>ğŸ“¤ Blender æ¸²æŸ“ç»“æœ</h3>
                    <img src="test_results_images/green_tea_bottle_viga_render.png" alt="Render Output">
                    <p style="margin-top: 0.5rem; font-size: 0.85rem; color: var(--text-secondary);">
                        æ¸²æŸ“å‡ºçš„ mesh æ˜¯æ‰å¹³çš„"æ¿å­"
                    </p>
                </div>
            </div>
        </section>
        
        <section>
            <h2>è¾“å‡ºçš„ JSON æ•°æ®</h2>
            <div class="code-block">
{
    "glb_path": "output/viga_test/green_tea_bottle_viga.glb",
    "translation": [0.066, -0.440, 1.458],
    "rotation": [0.00007, -0.019, -0.998, -0.062],  <span style="color: var(--text-secondary);">// å››å…ƒæ•°</span>
    "scale": [2.31, 2.31, 2.31]
}
            </div>
            <p style="margin-top: 0.5rem; color: var(--text-secondary);">
                VIGA ä¼šè¾“å‡ºä¸–ç•Œåæ ‡ç³»çš„å˜æ¢ä¿¡æ¯ï¼Œç”¨äºåœ¨ Blender åœºæ™¯ä¸­å®šä½ç‰©ä½“ã€‚
            </p>
        </section>
        
        <section>
            <h2>Mesh ç»“æ„åˆ†æ</h2>
            <table>
                <tr><th>å±æ€§</th><th>VIGA è¾“å‡º</th><th>åŸå§‹ SAM3D</th></tr>
                <tr><td>é¡¶ç‚¹æ•°</td><td>118,684</td><td>118,676</td></tr>
                <tr><td>é¢æ•°</td><td>237,360</td><td>237,344</td></tr>
                <tr>
                    <td>å°ºå¯¸ (X, Y, Z)</td>
                    <td class="warning">2.35, 1.10, 0.65</td>
                    <td class="warning">1.00, 0.23, 0.42</td>
                </tr>
            </table>
            
            <div class="alert-box">
                <h4>âš ï¸ é—®é¢˜ï¼šMesh æ˜¯æ‰å¹³çš„</h4>
                <p>ç”±äº <code>with_mesh_postprocess=False</code>ï¼ŒSAM3D è¾“å‡ºçš„æ˜¯ "billboard" å¼çš„å¹³é¢ meshï¼Œä¸æ˜¯çœŸæ­£çš„ 3D ç“¶å­å½¢çŠ¶ã€‚</p>
                <p style="margin-top: 0.5rem;">Y å’Œ Z ç»´åº¦æ˜æ˜¾æ¯” X å°å¾ˆå¤šï¼Œè¯æ˜è¿™æ˜¯ä¸€ä¸ªè¿‘ä¼¼å¹³é¢çš„ç»“æ„ã€‚</p>
            </div>
        </section>
        
        <section>
            <h2>ä¸ºä»€ä¹ˆ Mesh æ˜¯æ‰çš„ï¼Ÿ</h2>
            <p>åœ¨ <code>inference.py</code> ç¬¬ 144-145 è¡Œï¼Œmesh åå¤„ç†è¢«ç¡¬ç¼–ç ç¦ç”¨ï¼š</p>
            <div class="code-block">
return self._pipeline.run(
    image,
    None,
    seed,
    stage1_only=False,
    <span class="error">with_mesh_postprocess=False,</span>   <span style="color: var(--text-secondary);"># â† ç¦ç”¨äº† mesh åå¤„ç†</span>
    <span class="error">with_texture_baking=False,</span>      <span style="color: var(--text-secondary);"># â† ç¦ç”¨äº†çº¹ç†çƒ˜ç„™</span>
    with_layout_postprocess=True,
    use_vertex_color=True,
    ...
)
            </div>
            <p style="margin-top: 1rem; color: var(--text-secondary);">
                <strong>åŸå› ï¼š</strong><code>utils3d</code> åº“çš„ API ä¸å½“å‰ç‰ˆæœ¬ä¸å…¼å®¹ï¼Œä»¥åŠç¼ºå°‘ <code>nvdiffrast</code> çš„æŸäº›å‡½æ•°ã€‚
            </p>
        </section>
        
        <section>
            <h2>æ€§èƒ½ç»Ÿè®¡</h2>
            <table>
                <tr><th>é˜¶æ®µ</th><th>è€—æ—¶</th></tr>
                <tr><td>æ¨¡å‹åŠ è½½</td><td>~22 ç§’</td></tr>
                <tr><td>Sparse Structure é‡‡æ ·</td><td>~12 ç§’</td></tr>
                <tr><td>Sparse Latent é‡‡æ ·</td><td>~20 ç§’</td></tr>
                <tr><td>è§£ç  + å¯¼å‡º</td><td>~135 ç§’</td></tr>
                <tr><td><strong>æ€»è®¡</strong></td><td class="highlight"><strong>~3.5 åˆ†é’Ÿ</strong></td></tr>
            </table>
        </section>
        
        <section>
            <h2>æ–‡ä»¶ç»“æ„</h2>
            <div class="code-block">
â”œâ”€â”€ tools\sam3d\
â”‚   â”œâ”€â”€ sam3d_worker.py      <span style="color: var(--text-secondary);"># VIGA çš„ SAM3D è°ƒç”¨è„šæœ¬</span>
â”‚   â”œâ”€â”€ sam3_worker.py       <span style="color: var(--text-secondary);"># SAM3 åˆ†å‰²è„šæœ¬</span>
â”‚   â””â”€â”€ bridge.py            <span style="color: var(--text-secondary);"># MCP æœåŠ¡æ¡¥æ¥</span>
â”œâ”€â”€ utils\third_party\sam3d\
â”‚   â”œâ”€â”€ notebook\inference.py <span style="color: var(--text-secondary);"># SAM3D å°è£…ç±»</span>
â”‚   â””â”€â”€ checkpoints\hf\...    <span style="color: var(--text-secondary);"># æ¨¡å‹æƒé‡</span>
â””â”€â”€ output\viga_test\
    â””â”€â”€ green_tea_bottle_viga.glb <span style="color: var(--text-secondary);"># è¾“å‡ºçš„ GLB</span>
            </div>
        </section>
        
        <section>
            <h2>ä¸‹ä¸€æ­¥</h2>
            <ul style="list-style-position: inside; color: var(--text-secondary);">
                <li>ä¿®å¤ <code>utils3d</code> API å…¼å®¹æ€§é—®é¢˜</li>
                <li>å¯ç”¨ <code>with_mesh_postprocess=True</code></li>
                <li>æµ‹è¯•çœŸæ­£çš„ 3D mesh è¾“å‡º</li>
                <li>æˆ–è€…ä½¿ç”¨ Gaussian Splatting ä¸“ç”¨æ¸²æŸ“å™¨æŸ¥çœ‹ç»“æœ</li>
            </ul>
        </section>
        
        <footer>
            <p>æµ‹è¯•æ—¥æœŸ: 2026-02-03 03:28 - 03:40 PST</p>
            <p class="signature">â€” Created by Yuna ğŸ¤–</p>
        </footer>
    </div>
</body>
</html>
<!-- Created by Yuna -->
